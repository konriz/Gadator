<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
    <title>User panel</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<nav th:insert="~{header :: navigation}"/>

<div th:if="${loggedUser}" th:object="${loggedUser}">
    <h2>You are logged in as :</h2>
    <h2 th:text="*{name}">User Name</h2>
    <p th:text="*{email}">User email</p>
    <div id="messages-count">
        Messages posted:
        <p th:text="${#lists.size(messages)}"></p>
    </div>

    <div th:if="${#authentication.getPrincipal().getUsername()} == *{name}">
        <a th:href="@{'/user/' + *{name} + '/delete'}">Delete account</a>
    </div>

</div>

<div th:insert="~{footer :: footer}"/>


</body>
</html>